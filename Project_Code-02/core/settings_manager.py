import json
from pathlib import Path
import copy
import vlc # ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á‡∏à‡∏≤‡∏Å URL

CONFIG_FILE = Path("config/config.json")

# ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô config
DEFAULT_CONFIG = {
    "theme": "dark", #‡∏ò‡∏µ‡∏° UI ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
    "sound_enabled": True, #‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á
    "volume": 0.7, #‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
    "current_level": "easy", #‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
    "timer_duration": 180, #‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ (‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
    "show_hints": True, #‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ
    "language": "th", #‡∏†‡∏≤‡∏©‡∏≤
    "background_music": "data/Scott Holmes Music - Acoustic Indie Folk.mp3"
}

# ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå config ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ
def _ensure_config_file():
    CONFIG_FILE.parent.mkdir(parents=True, exist_ok=True)
    #‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏î‡πÄ‡∏£‡∏Å‡∏ó‡∏≠‡∏£‡∏µ            ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏∞‡∏î‡∏±‡∏ö ‡πÑ‡∏°‡πà‡πÇ‡∏¢‡∏ô error ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡πÅ‡∏•‡πâ‡∏ß
    if not CONFIG_FILE.exists(): #‡∏ñ‡πâ‡∏≤‡πÑ‡∏ü‡∏•‡πå config ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ
        save_config(DEFAULT_CONFIG.copy()) #‡πÄ‡∏£‡∏µ‡∏¢‡∏Å save_config ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏à‡∏≤‡∏Å‡∏™‡∏≥‡πÄ‡∏ô‡∏≤ DEFAULT_CONFIG

# ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå config
def load_config(config_file=CONFIG_FILE):
    if not config_file.exists(): #‡∏ñ‡πâ‡∏≤‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏°‡∏µ ‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡πà‡∏≤ default
        save_config(DEFAULT_CONFIG.copy(), config_file)
    try:
        with open(config_file, "r", encoding="utf-8") as f: #‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå config ‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏≠‡πà‡∏≤‡∏ô‡∏î‡πâ‡∏ß‡∏¢
            data = json.load(f) #‡πÇ‡∏´‡∏•‡∏î JSON ‡πÄ‡∏õ‡πá‡∏ô Python dict
        cfg = copy.deepcopy(DEFAULT_CONFIG) #‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏≥‡πÄ‡∏ô‡∏≤‡∏•‡∏∂‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ñ‡πà‡∏≤ default (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô DEFAULT_CONFIG ‡πÑ‡∏î‡πâ)
        cfg.update(data) #‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡πà‡∏≤ default ‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå
        return cfg #‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ config
    except:
        save_config(DEFAULT_CONFIG.copy(), config_file) #‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÑ‡∏ü‡∏•‡πå default ‡∏ó‡∏±‡∏ö (reset)
        return copy.deepcopy(DEFAULT_CONFIG) #‡∏Ñ‡∏∑‡∏ô‡∏™‡∏≥‡πÄ‡∏ô‡∏≤ default

# ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ü‡∏•‡πå config
def save_config(cfg_dict, config_file=CONFIG_FILE): #‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô dict ‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå JSON
    config_file.parent.mkdir(parents=True, exist_ok=True) #‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ
    temp_file = config_file.with_suffix(".tmp") #‡∏™‡∏£‡πâ‡∏≤‡∏á path ‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß‡πÇ‡∏î‡∏¢‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏õ‡πá‡∏ô .tmp ‡πÄ‡∏ä‡πà‡∏ô config/config.json.tmp
    with open(temp_file, "w", encoding="utf-8") as f: #‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô JSON ‡∏•‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß
        json.dump(cfg_dict, f, ensure_ascii=False, indent=2)
    temp_file.replace(config_file) #‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏ü‡∏•‡πåconfig_file‡∏î‡πâ‡∏ß‡∏¢‡πÑ‡∏ü‡∏•‡πåtemp_file
    return True #‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ True ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à

# ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
def get_setting(key, default=None):
    cfg = load_config() #‡πÇ‡∏´‡∏•‡∏î config (‡πÄ‡∏£‡∏µ‡∏¢‡∏Å load_config() ‡πÄ‡∏™‡∏°‡∏≠)
    return cfg.get(key, default) #‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ cfg.get(key, default)

# ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
def set_setting(key, value):
    cfg = load_config() #‡πÇ‡∏´‡∏•‡∏î config ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
    cfg[key] = value #‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ key ‡πÄ‡∏õ‡πá‡∏ô value
    save_config(cfg) #‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏•‡∏±‡∏ö‡∏•‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏î‡πâ‡∏ß‡∏¢ save_config
    return True #‡∏Ñ‡∏∑‡∏ô True ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à

# ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡πà‡∏≤ config ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
def reset_config():
    save_config(copy.deepcopy(DEFAULT_CONFIG)) #‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå DEFAULT_CONFIG ‡∏ó‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå config ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
    return True

# ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡πà‡∏≤‡∏ò‡∏µ‡∏°
def get_theme():
    return get_setting("theme", "dark") #‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ theme ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏à‡∏≤‡∏Å config ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏à‡∏∞‡∏Ñ‡∏∑‡∏ô "dark" ‡πÄ‡∏õ‡πá‡∏ô default

def set_theme(theme): 
    if theme not in ["dark", "light"]: #theme ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏û‡∏≤‡∏∞ "dark" ‡∏´‡∏£‡∏∑‡∏≠ "light" ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
        print("Theme ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô dark ‡∏´‡∏£‡∏∑‡∏≠ light")
        return False #‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∑‡∏ô False
    return set_setting("theme", theme) #‡∏ñ‡πâ‡∏≤‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å set_setting ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ True

# ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡πà‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏á
def get_volume():
    return get_setting("volume", 0.7)

def set_volume(vol):
    vol = max(0.0, min(1.0, float(vol))) #‡πÅ‡∏õ‡∏•‡∏á vol ‡πÄ‡∏õ‡πá‡∏ô float ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏´‡πâ 0.0‡πÄ‡∏õ‡πá‡∏ômin 1.0‡πÄ‡∏õ‡πá‡∏ômax
    return set_setting("volume", vol) #‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏î‡πâ‡∏ß‡∏¢ set_setting

# ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡πà‡∏≤‡πÄ‡∏û‡∏•‡∏á
def is_sound_enabled():
    return get_setting("sound_enabled", True) #‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ boolean ‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á (default True)

# ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ URL ‡πÄ‡∏û‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö
def get_music_url():
    return get_setting("background_music") #‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ path/URL ‡∏Ç‡∏≠‡∏á‡πÄ‡∏û‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏à‡∏≤‡∏Å config

# ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏û‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö
def set_music_url(url):
    return set_setting("background_music", url) #‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡πà‡∏≤ background_music ‡πÉ‡∏ô config ‡πÄ‡∏õ‡πá‡∏ô url

# ‡∏™‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á
def toggle_sound():
    current = is_sound_enabled() #‡∏™‡∏•‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ sound_enabled ‡πÅ‡∏•‡πâ‡∏ß‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
    return set_setting("sound_enabled", not current)

# ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á‡∏à‡∏≤‡∏Å URL ‡∏î‡πâ‡∏ß‡∏¢ VLC
_music_player = None # ‡πÄ‡∏Å‡πá‡∏ö instance ‡∏Ç‡∏≠‡∏á vlc.MediaPlayer
#Global variable ‡∏ä‡∏∑‡πà‡∏≠ _music_player ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô None ‚Äî ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á‡∏à‡∏∞‡πÄ‡∏Å‡πá‡∏ö instance ‡∏Ç‡∏≠‡∏á vlc.MediaPlayer ‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏´‡∏¢‡∏∏‡∏î/‡∏õ‡∏•‡πà‡∏≠‡∏¢ resource ‡πÑ‡∏î‡πâ‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á
def play_music():
    global _music_player #‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ global _music_player ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô
    if not is_sound_enabled(): 
        print("‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà ‡πÑ‡∏°‡πà‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á")
        return #‡∏ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏õ‡∏¥‡∏î ‡πÉ‡∏´‡πâ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡∏∞ return ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô
    url = get_music_url() #‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏•‡∏á‡∏à‡∏≤‡∏Å config
    try:
        _music_player = vlc.MediaPlayer(url) #‡∏™‡∏£‡πâ‡∏≤‡∏á MediaPlayer ‡∏î‡πâ‡∏ß‡∏¢ source ‡πÄ‡∏õ‡πá‡∏ô url
        _music_player.audio_set_volume(int(get_volume() * 100)) #‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Ç‡∏≠‡∏á VLC ‡∏ó‡∏µ‡πà 0‚Äì100 ‡πÇ‡∏î‡∏¢‡∏Ñ‡∏π‡∏ì‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô config (0.0‚Äì1.0) ‡∏î‡πâ‡∏ß‡∏¢ 100 ‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô int
        result = _music_player.play() #‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô
        if result == -1: # -1 ‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á VLC ‡πÄ‡∏•‡πà‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ
            print("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á‡πÑ‡∏î‡πâ: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö URL ‡∏´‡∏£‡∏∑‡∏≠ VLC ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà")
        else:
            print(f"üéµ ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á‡∏à‡∏≤‡∏Å URL: {url}")
    except Exception as e: #‡∏ñ‡πâ‡∏≤‡∏°‡∏µ exception ‡πÉ‡∏î ‡πÜ
        print("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á‡πÑ‡∏î‡πâ:", e)

# ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏û‡∏•‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∑‡∏ô resource ‡∏Ç‡∏≠‡∏á player
def stop_music():
    global _music_player
    if _music_player:
        _music_player.stop() #‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô
        _music_player.release() #‡∏õ‡∏•‡πà‡∏≠‡∏¢ resource ‡∏Ç‡∏≠‡∏á player
        _music_player = None #‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πá‡∏ô None ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ state ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏°‡πà‡∏°‡∏µ player

# ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
def initialize_music():
    if is_sound_enabled():
        play_music()
        print("üéµ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏û‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö")
    else:
        print("üîá ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà ‡πÑ‡∏°‡πà‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á")
        
if __name__ == "__main__":
    reset_config() #‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÑ‡∏ü‡∏•‡πå config ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤ default
    print(f"‚úÖ Config file ready at: {CONFIG_FILE.resolve()}") #‡∏û‡∏¥‡∏°‡∏û‡πå path ‡πÄ‡∏ï‡πá‡∏°‡∏Ç‡∏≠‡∏á‡πÑ‡∏ü‡∏•‡πå config ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á/‡∏≠‡∏¢‡∏π‡πà
    play_music() #‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á‡∏ï‡∏≤‡∏°‡∏Ñ‡πà‡∏≤ config
    input("‡∏Å‡∏î Enter ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏û‡∏•‡∏á‡πÅ‡∏•‡∏∞‡∏≠‡∏≠‡∏Å...") 
    stop_music() #‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏û‡∏•‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∑‡∏ô resource ‡∏Å‡πà‡∏≠‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏≠‡∏≠‡∏Å